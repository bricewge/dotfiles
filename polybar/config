;;; [Polybar](https://github.com/jaagr/polybar) configuration


[bar/example]
monitor = ${env:MONITOR:eDP1}
width = 100%
height = 30
fixed-center = true

background = ${colors.background}
foreground = ${colors.foreground}

underline-size = 2
underline-color = ${colors.blue}

module-margin = 2

font-0 = MesloLGS Nerd Font:size=12;2
font-1 = Meslo LG S:size=12;2
font-2 = Noto Sans:size=11;1
; Extra symbols: http://fontawesome.io/cheatsheet/

enable-ipc = true

modules-left = sxhkd
modules-center = bspwm 
modules-right = volume battery date powermenu

tray-position = right
tray-padding = 2

wm-restack = bspwm
override-redirect = true

; ** colors
[colors]
include-file = $HOME/.config/polybar/colors

; ** xwindow
[module/xwindow]
type = internal/xwindow
label = %title:0:30:...%

; ** bspwm
[module/bspwm]
type = internal/bspwm

;     ● ○

ws-icon-default = 

; *** focused
label-focused-occupied = 
label-focused-occupied-underline= ${colors.primary}
label-focused-occupied-padding = 1
label-focused-empty = 
label-focused-empty-underline= ${colors.primary}
label-focused-empty-padding = 1

; *** occupied
label-occupied = 
label-occupied-foreground = ${colors.foreground-alt}
label-occupied-padding = 1

; *** empty
label-empty = 
label-empty-foreground = ${colors.foreground-alt}
label-empty-padding = 1

; *** urgent
; TODO Fix urgent
label-urgent = %icon%
label-urgent-foreground = ${colors.orange}
label-urgent-padding = 1
label-urgent-occupied = 
label-focused-urgent = %icon%
label-focused-urgent-foreground = ${colors.orange}
label-focused-urgent-padding = 1
label-focused-urgent-underline= ${colors.primary}

; ** date
[module/date]
type = internal/date
interval = 1

date =
time = %H:%M
date-alt = "%Y-%m-%d "
time-alt = %H:%M:%S
label = %date%%time%
format =  <label> 
label-alt-foreground = ${colors.foreground-alt}

; ** volume
[module/volume]
type = internal/volume

format-volume = <ramp-volume> <label-volume>
format-muted = <label-muted>
label-volume = %percentage%%
label-muted =  muted
label-muted-foreground = ${colors.foreground-alt}

ramp-volume-0 = 
ramp-volume-1 = 
ramp-volume-2 = 
ramp-headphones-0 = 

; ** battery
[module/battery]
type = internal/battery
battery = BAT0
adapter = ADP1
full-at = 98

label-charging = %percentage%%
format-charging =  <label-charging>
label-discharging = %percentage%%
format-discharging = <ramp-capacity> <label-discharging>
label-full = %percentage%%
format-full =  <label-full>

ramp-capacity-0 = 
ramp-capacity-1 = 
ramp-capacity-2 = 
ramp-capacity-3 = 
ramp-capacity-4 = 

; ** powermenu
[module/powermenu]
type = custom/text
content = "   "
click-left = rofi-power

; ** TODO custom sxhkd mode
[module/sxhkd]
type = custom/script

interval = 1
exec = ~/.config/polybar/sxhkd.sh
format-padding = 1 
format-background = ${colors.background-alt}
format-foreground = ${colors.foreground-alt}

;  until https://github.com/ryanoasis/nerd-fonts/issues/157 is fixed and the
; real NixOS logo can be used

[module/demo]
type = custom/ipc
hook-0 = echo foobar
hook-1 = date +%s
hook-2 = whoami
initial = 1
click-left = polybar-msg -p %pid% hook demo 1
click-right = polybar-msg -p %pid% hook demo 2
double-click-left = polybar-msg -p %pid% hook demo 3

; * settings
[settings]
screenchange-reload = true
;compositing-background = xor
;compositing-background = screen
;compositing-foreground = source
;compositing-border = over

[global/wm]
margin-top = 0
margin-bottom = 0
