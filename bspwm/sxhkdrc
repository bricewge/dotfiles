# -*- mode: conf-space -*-
# Hotkeys for bspwm
# * bspwm hotkeys
# ** Not orded, yet

# Close or kill a window
super + {_,shift + }d
	bspc node -{c,k}
# super + b
# 	bspc desktop -B

# Toggle the state of the window
super + {_,shift +} f
	bspc node -t \~{floating,fullscreen}

super + {_,shift, +} s
	bspc node -t \~tiled

super + {Tab,at}
	bspc {node,desktop} -f last

# Seems useless since their is ~alt + tab~ 
# super + {o,i}
# 	bspc control --record-history off; \
# 	bspc node {older,newer} -f; \
# 	bspc control --record-history on

# super + y
# 	bspc node -w last.manual

super + m
	bspc node --swap biggest.local

# super + {_,shift + }c
# 	bspc window -f {next,prev}

# super + ctrl + {_,shift + }space
# 	bspc {window -p cancel,desktop -c}

super + {comma,semicolon}
	bspc desktop --focus {next,prev}

# super + ctrl + {1-9}
# 	bspc window -r 0.{1-9}

# Toogle windows gap
super + g
  bspc config window_gap $( [ `bspc config window_gap` -eq $BSPWM_GAP ] && echo 0 || echo $BSPWM_GAP )

# Rotate the tree clockwise and counter-clockwise
super + {_,shift + }r
 bspc node @/ -R {+,-}90

# ** vim movments
# Select windows and move them in the current desktop 
super + {_,shift + }{h,j,k,l}
	bspc node --{focus,swap} {west,south,north,east}

# Resize node from their sides, increase then decrease
super + alt + {h,j,k,l}
  bspc node --resize {left -20 0, bottom 0 20, top 0 -20, right 20 0}
super + alt + shift + {h,j,k,l}
  bspc node --resize {left 20 0, bottom 0 -20, top 0 20, right -20 0}

# Move between desktop and move node bettwen desktop
super + ctrl + {h,l}
	bspc desktop --focus {prev,next}
super + ctrl + shift + {h,l}
	dir={prev,next} && \
	bspc node --to-desktop ${dir} && \
  bspc node last --focus

# * EXPERIMENTAL
# Trying modal interaction
# ** resize
super + r: {h,j,k,l}
  bspc node --resize {left -20 0, bottom 0 20, top 0 -20, right 20 0}
super + r: shift + {h,j,k,l}
  bspc node --resize {left 20 0, bottom 0 -20, top 0 20, right -20 0}



# ** Move between desktops
# Switch to desktop 1-6 with recpectivly &, é, ", ', (, §
super + {ampersand,eacute,quotedbl,apostrophe,parenleft,section}
	bspc desktop -f ^{1-6}

super + {1-6}
	bspc desktop -f ^{1-6}

# Send the selected window to the desktop 1-6 and follow it, if no
# window is selected go to the desktop 1-6 anyway.
super + {1-6}
	nth={1-6} && \
	bspc node --to-desktop ^${nth} && \
  bspc node last --focus
# Go to the next or previous desktop
super + {Left,Right}
	bspc desktop -f {prev,next}
# Move the selected window to the next or previous desktop
super + shift + {Left,Right}
	dir={prev,next} && \
	bspc node --to-desktop ${dir} && \
  bspc node last --focus


# ** Mouse actions
~button1
	bspc node pointed -f

# * Launcher hotkeys
super + space ; t
	kitty
super + space ; T
	termite

# ** TODO Should open a clean emacs
super + space ; e
        emacsclient -nc -a "" -e "(switch-to-buffer \"*Bookmark List*\")"

super + space ; shift + e
        emacs-old

super + space ; f 
	nautilus

super + space ; w
	firefox

super + space ; shift + w
	chromium

super + space ; v
	mpv --profile=pseudo-gui

# super + v
#   xclip -o

super + space ; space
	rofi -show drun -combi-modi "drun,run,ssh,pass:rofi-pass" -modi combi
# dmenu_run -l 20 -w 200 -y 19 -fn -lucy-tewi-medium-r-normal--11-90-75-75-p-58-iso10646-1 -nb '#232c31' -nf '#6c7a80' -sf '#ac4142' -sb '#232c31'
super + p
	rofi-pass

super + w
  rofi-wifi

super + u
  UDISKIE_DMENU_LAUNCHER=rofi udiskie-dmenu -matching regex -dmenu -i -no-custom -multi-select

# super + c
# 	emacsclient -ne "(make-capture-frame)"

# * Media keys
XF86MonBrightnessDown
	xbacklight -fps 10 -ctrl acpi_video0 -7

XF86MonBrightnessUp
	xbacklight -fps 10 -ctrl acpi_video0 +7

XF86KbdBrightnessDown
	xbacklight -fps 10 -ctrl smc::kbd_backlight -7

XF86KbdBrightnessUp
	xbacklight -fps 10 -ctrl smc::kbd_backlight +7

# ** audio
XF86AudioPrev
  playerctl previous

XF86AudioPlay
  playerctl play-pause

XF86AudioNext
  playerctl next

XF86AudioRaiseVolume
	pactl set-sink-mute @DEFAULT_SINK@ false ; pactl set-sink-volume @DEFAULT_SINK@ +5db

XF86AudioLowerVolume
	pactl set-sink-mute @DEFAULT_SINK@ false ; pactl set-sink-volume @DEFAULT_SINK@ -5db

XF86AudioMute
	pactl set-sink-mute @DEFAULT_SINK@ toggle

XF86PowerOff
  rofi-power "loginctl terminate-user ${USER}" 
  # notify-send "poweroff button disabled" 

# * Specials hotkeys
# Reload UI configurations
super + Escape
	 pkill -USR1 -x "(sxhkd|compton)" && \
   notify-send "sxhkd reloaded"

# Quit bspwm and kill the panel
super + alt + Escape
        pkill conky; pkill polybar; bspc quit

# ~Escape
# 	~/.config/bspwm/panel/scripts/toggle_conky *
